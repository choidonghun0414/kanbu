<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="board">
 
 	<!-- 공지 리스트 검색 -->
 	<select id="selectNotice" parameterType="int" resultType="boardDTO">
	 	select n.index_num, n.title, m.nick, n.reg_date, n.views
		from notice n, member m
		where m.index_num = n.writer
		and n.writer = #{writer}
		order by n.index_num desc
	</select>
	
	
	<!-- 관리자 고유번호 검색 -->
	<select id="selectAdmin" resultType="int">
		select index_num
		from member
		where status = 100
	</select>
	
	
	<!-- 공지 등록 -->
 	<insert id="insertBoard" parameterType="boardDTO">
 		insert into notice (index_num, title, writer, content, reg_date) 
 		values (NOTICE_SEQ.nextval, #{title}, #{writer}, #{content}, sysdate)
 	</insert>
	
	
	<!-- 공지 상세보기 -->
	<select id="selectNoticeDetail" parameterType="int" resultType="boardDTO">
	 	select n.index_num, n.title, m.nick, n.content
		from notice n, member m
		where n.index_num = #{index_num}
	</select>
	
	
	<!-- 공지 수정 -->
	<update id="noticeUpdate">
		update notice
		set content = #{content}, title = #{title}
		where index_num = #{index_num}
	</update>
	
	
	<!-- 공지 삭제 -->
	<delete id="noticeDelete">
		delete
		from notice
		where index_num = #{index_num}
	</delete>
	
 
 </mapper> 