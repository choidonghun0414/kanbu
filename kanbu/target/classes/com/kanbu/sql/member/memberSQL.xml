<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="member">

 	<insert id="insertMember" parameterType="MemberDTO">
 		insert into member (index_num, id, pw2, nick, phone,
 		 mail, domain, agree, privacy, status, reg_date) 
 		values (member_seq.NEXTVAL, #{id}, #{pw2}, #{nick}, #{phone}, 
 		#{mail}, #{domain}, #{agree}, #{privacy}, #{status}, sysdate)
 	</insert>
 	
 	<select id="selectMemberInfo" parameterType="MemberDTO" resultType="MemberDTO">
 		select id, pw2, nick, phone,
 		 mail, domain
 		from member
 		where id = #{id}
 	</select>
 	
 	<!-- 로그인 -->
 	<select id="selectLogin" parameterType="String" resultType="MemberDTO">
 		select pw2, nick, index_num, status
 		from member
 		where id = #{id}
 	</select>
 	
 	<!-- 아이디 중복 체크 -->
	<select id="idChk" resultType="int">
		SELECT COUNT(*) FROM MEMBER
		WHERE id = #{id}
	</select>
	
	<!-- 아이디 중복 체크(로그인용) -->
	<select id="idChkLogin" resultType="int" parameterType="String">
		SELECT COUNT(*) FROM MEMBER
		WHERE id = #{id}
	</select>
	
 	<!-- 비번 체크 -->
 	<select id="pwChk" resultType="int" >
 		SELECT COUNT(*) FROM MEMBER
		WHERE id = #{id}
		and pw2 = #{pw2}
 	</select>
 	
 	<!--닉네임 중복 체크 -->
 	<select id="nickChk" resultType="int" >
 		SELECT COUNT(*) FROM MEMBER
		WHERE nick = #{nick}
 	</select>
 	
 	<select id="selectId" parameterType="MemberDTO" resultType="String" >
 		select id
 		from member
 		where phone = #{phone}
 		and mail = #{mail}
 	</select>
 	
 	<select id="selectPw" resultType="java.lang.String" parameterType="MemberDTO">
 		select pw2
 		from member
 		where id = #{id}
 		and phone = #{phone}
 		and mail = #{mail}
 	</select>
 	
 	<update id="updateMember" parameterType="MemberDTO">
 		update member
 		set pw2 = #{pw2}, nick = #{nick}, phone = #{phone},
 		mail = #{mail}
 		where id = #{id}
 	</update>
 	
 	<delete id="deleteMember" parameterType="MemberDTO">
 		delete from member
 		where id = #{id}
 		
 	</delete>
 </mapper> 